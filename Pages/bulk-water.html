<!DOCTYPE html>
<html lang="en" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NDMA Portal - LIVE MARKET RATES</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;500;600;700;800;900&display=swap" rel="stylesheet">
      <link rel="icon" type="image/png" href="/static/lims.png"> 
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdn.sheetjs.com/xlsx-0.19.3/package/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/exceljs/dist/exceljs.min.js"></script>
<script src="../logo.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        window.FontAwesomeConfig = {
            autoReplaceSvg: 'nest', // Options: 'nest', 'remove', 'replace'
        };
    </script>
   

    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- Import the CSS files -->
    <link rel="stylesheet" href="../styles/components.css">

    
    <style>
        * {
            font-family: "Inter", sans-serif;
        }

        ::-webkit-scrollbar {
            display: none;
        }
    </style>

    
<style>
    .highlighted-section {
    outline: 2px solid #3F20FB;
    background-color: rgba(63, 32, 251, 0.1);
    }

    .edit-button {
    position: absolute;
    z-index: 1000;
    }
.water-heading {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    font-size: 2.5rem;
    font-weight: 700;
    text-align: center;
    margin-top: 30px;
    color: #3498db;
    background: linear-gradient(90deg, #3498db, #6dd5fa);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    animation: fadeInDown 1s ease-in-out;
}

.water-icon {
    animation: drip 2s infinite ease-in-out;
    font-size: 1.8rem;
}

/* === Fade In Down Animation === */
@keyframes fadeInDown {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* === Drip Animation for Icon === */
@keyframes drip {
    0%, 100% {
        transform: translateY(0);
        opacity: 1;
    }
    50% {
        transform: translateY(4px);
        opacity: 0.7;
    }
}
        .calculator {
            padding: 20px;
            margin-bottom: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        select, input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .results {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            margin-top:20px;
        }
        .chart-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 30px;
        }
        .chart-box {
            flex: 1;
            min-width: 300px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 0 5px rgba(0,0,0,0.1);
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .highlight {
            font-weight: bold;
            color: #e74c3c;
        }
        .note {
            font-size: 0.9em;
            color: #7f8c8d;
            margin-top: 20px;
        }
        .export-buttons {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            justify-content: center;
        }
        .export-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .pdf-btn {
            background-color: #e74c3c;
            color: white;
        }
        .excel-btn {
            background-color: #2ecc71;
            color: white;
        }
        .icon {
            width: 18px;
            height: 18px;
        }
        .container1 {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            padding: 20px;
            margin-bottom:20px;
            margin-top:20px;

        }

h1 i {
    color: #3498db;
    margin-right: 10px;
}

/* === Water Button Styling with Animation === */
.water-button {
    background-color: #3498db;
    color: white;
    border: none;
    padding: 14px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    font-weight: 600;
    display: block;         /* Make it a block-level element */
    margin: 20px auto;      /* Center horizontally (with auto margins) and add vertical spacing */
    text-align: center;     /* Center text inside the button */
    gap: 10px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);

}

.water-button:hover {
    background-color: #2980b9;
    transform: scale(1.05);
}

#crop {
    padding: 8px;
    border-radius: 5px;
    border: 1px solid #ccc;
    font-size: 1rem;
}
#region {
    padding: 8px;
    border-radius: 5px;
    border: 1px solid #ccc;
    font-size: 1rem;
}
#acres {
    padding: 8px;
    border-radius: 5px;
    border: 1px solid #ccc;
    font-size: 1rem;
}
 .site-footer {
            background: linear-gradient(to right, #daf9d9, #a0d5a1);
            color: #1f2937;
            padding: 3rem 0;
            margin-top: 30px;
        }
    
</style>


    
<script>
        tailwind.config = {
            theme: {
            extend: {
                colors: {
                ...{"transparent":"transparent","current":"currentColor","black":"#000000","white":"#ffffff","gray":{"50":"#f9fafb","100":"#f3f4f6","200":"#e5e7eb","300":"#d1d5db","400":"#9ca3af","500":"#6b7280","600":"#4b5563","700":"#374151","800":"#1f2937","900":"#111827"},"red":{"50":"#fef2f2","100":"#fee2e2","200":"#fecaca","300":"#fca5a5","400":"#f87171","500":"#ef4444","600":"#dc2626","700":"#b91c1c","800":"#991b1b","900":"#7f1d1d"},"yellow":{"50":"#fffbeb","100":"#fef3c7","200":"#fde68a","300":"#fcd34d","400":"#fbbf24","500":"#f59e0b","600":"#d97706","700":"#b45309","800":"#92400e","900":"#78350f"},"green":{"50":"#ecfdf5","100":"#d1fae5","200":"#a7f3d0","300":"#6ee7b7","400":"#34d399","500":"#10b981","600":"#059669","700":"#047857","800":"#065f46","900":"#064e3b"},"blue":{"50":"#eff6ff","100":"#dbeafe","200":"#bfdbfe","300":"#93c5fd","400":"#60a5fa","500":"#3b82f6","600":"#2563eb","700":"#1d4ed8","800":"#1e40af","900":"#1e3a8a"},"indigo":{"50":"#eef2ff","100":"#e0e7ff","200":"#c7d2fe","300":"#a5b4fc","400":"#818cf8","500":"#6366f1","600":"#4f46e5","700":"#4338ca","800":"#3730a3","900":"#312e81"},"purple":{"50":"#f5f3ff","100":"#ede9fe","200":"#ddd6fe","300":"#c4b5fd","400":"#a78bfa","500":"#8b5cf6","600":"#7c3aed","700":"#6d28d9","800":"#5b21b6","900":"#4c1d95"},"pink":{"50":"#fdf2f8","100":"#fce7f3","200":"#fbcfe8","300":"#f9a8d4","400":"#f472b6","500":"#ec4899","600":"#db2777","700":"#be185d","800":"#9d174d","900":"#831843"}},
                ...{"primary":{"50":"var(--color-primary-50)","100":"var(--color-primary-100)","200":"var(--color-primary-200)","300":"var(--color-primary-300)","400":"var(--color-primary-400)","500":"var(--color-primary-500)","600":"var(--color-primary-600)","700":"var(--color-primary-700)","800":"var(--color-primary-800)","900":"var(--color-primary-900)","DEFAULT":"var(--color-primary)","focus":"var(--color-primary-focus)","content":"var(--color-primary-content)"},"secondary":{"50":"var(--color-secondary-50)","100":"var(--color-secondary-100)","200":"var(--color-secondary-200)","300":"var(--color-secondary-300)","400":"var(--color-secondary-400)","500":"var(--color-secondary-500)","600":"var(--color-secondary-600)","700":"var(--color-secondary-700)","800":"var(--color-secondary-800)","900":"var(--color-secondary-900)","DEFAULT":"var(--color-secondary)","focus":"var(--color-secondary-focus)","content":"var(--color-secondary-content)"},"accent":{"50":"var(--color-accent-50)","100":"var(--color-accent-100)","200":"var(--color-accent-200)","300":"var(--color-accent-300)","400":"var(--color-accent-400)","500":"var(--color-accent-500)","600":"var(--color-accent-600)","700":"var(--color-accent-700)","800":"var(--color-accent-800)","900":"var(--color-accent-900)","DEFAULT":"var(--color-accent)","focus":"var(--color-accent-focus)","content":"var(--color-accent-content)"},"neutral":{"50":"var(--color-neutral-50)","100":"var(--color-neutral-100)","200":"var(--color-neutral-200)","300":"var(--color-neutral-300)","400":"var(--color-neutral-400)","500":"var(--color-neutral-500)","600":"var(--color-neutral-600)","700":"var(--color-neutral-700)","800":"var(--color-neutral-800)","900":"var(--color-neutral-900)","DEFAULT":"var(--color-neutral)","focus":"var(--color-neutral-focus)","content":"var(--color-neutral-content)"},"info":{"50":"var(--color-info-50)","100":"var(--color-info-100)","200":"var(--color-info-200)","300":"var(--color-info-300)","400":"var(--color-info-400)","500":"var(--color-info-500)","600":"var(--color-info-600)","700":"var(--color-info-700)","800":"var(--color-info-800)","900":"var(--color-info-900)","DEFAULT":"var(--color-info)","focus":"var(--color-info-focus)","content":"var(--color-info-content)"},"success":{"50":"var(--color-success-50)","100":"var(--color-success-100)","200":"var(--color-success-200)","300":"var(--color-success-300)","400":"var(--color-success-400)","500":"var(--color-success-500)","600":"var(--color-success-600)","700":"var(--color-success-700)","800":"var(--color-success-800)","900":"var(--color-success-900)","DEFAULT":"var(--color-success)","focus":"var(--color-success-focus)","content":"var(--color-success-content)"},"warning":{"50":"var(--color-warning-50)","100":"var(--color-warning-100)","200":"var(--color-warning-200)","300":"var(--color-warning-300)","400":"var(--color-warning-400)","500":"var(--color-warning-500)","600":"var(--color-warning-600)","700":"var(--color-warning-700)","800":"var(--color-warning-800)","900":"var(--color-warning-900)","DEFAULT":"var(--color-warning)","focus":"var(--color-warning-focus)","content":"var(--color-warning-content)"},"error":{"50":"var(--color-error-50)","100":"var(--color-error-100)","200":"var(--color-error-200)","300":"var(--color-error-300)","400":"var(--color-error-400)","500":"var(--color-error-500)","600":"var(--color-error-600)","700":"var(--color-error-700)","800":"var(--color-error-800)","900":"var(--color-error-900)","DEFAULT":"var(--color-error)","focus":"var(--color-error-focus)","content":"var(--color-error-content)"},"danger":{"50":"var(--color-error-50)","100":"var(--color-error-100)","200":"var(--color-error-200)","300":"var(--color-error-300)","400":"var(--color-error-400)","500":"var(--color-error-500)","600":"var(--color-error-600)","700":"var(--color-error-700)","800":"var(--color-error-800)","900":"var(--color-error-900)","DEFAULT":"var(--color-error)","focus":"var(--color-error-focus)","content":"var(--color-error-content)"},"failure":{"50":"var(--color-error-50)","100":"var(--color-error-100)","200":"var(--color-error-200)","300":"var(--color-error-300)","400":"var(--color-error-400)","500":"var(--color-error-500)","600":"var(--color-error-600)","700":"var(--color-error-700)","800":"var(--color-error-800)","900":"var(--color-error-900)","DEFAULT":"var(--color-error)","focus":"var(--color-error-focus)","content":"var(--color-error-content)"}},
                },
            },
            },
            variants: {
            extend: {
                backgroundColor: ['active', 'group-hover'],
                textColor: ['active', 'group-hover'],
            },
            },
            plugins: [],
        };
</script>

</head>

<body class="h-full text-base-content">
    <!-- Header with green gradient background -->

    <header class="site-header">
  <div class="header-container">
    <div class="header-left">
      <div class="header-logo">
        <img src="../Assets/lims.png" alt="Logo" class="main-logo">
        <img id="portalLogo" class="portal-logo">
      </div>
    </div>

    <nav class="header-nav">
  <a href="../index1.html" class="header-nav-item">Home</a>
  <a href="../map.html" class="header-nav-item">Agri Self Analysis</a>
  <a href="../vector.html" class="header-nav-item">GIS Analysis</a>

  <div class="dropdown1">
    <button class="header-nav-item dropdown-btn">
      Agri Services <i class="fa-solid fa-chevron-down"></i>
    </button>
    <div class="dropdown1-content">
      <a href="livestock.html" class="header-nav-item">Live Stocks Rate</a>
     <!--  <a href="dealers.html" class="header-nav-item">Dealers</a> -->
      <a href="bulk-water.html" class="header-nav-item">Bulk Water Requirement</a>
      <a href="fertilizer.html" class="header-nav-item">Fertilizer Requirement</a>
    </div>
  </div>
</nav>


    <button class="mobile-menu-button">
      <i class="fa-solid fa-bars"></i>
    </button>
  </div>

  <div class="mobile-menu">
    <a href="../index1.html">Home</a>
    <a href="../map.html">Agri Self Analysis</a>
    <a href="../vector.html">GIS Analysis</a>
    <details class="mobile-dropdown">
      <summary>Agri Services</summary>
      <a href="livestock.html">Live Stocks Rate</a>
      <a href="dealers.html">Dealers</a>
      <a href="bulk-water.html">Bulk Water Requirement</a>
      <a href="fertilizer.html">Fertilizer Requirement</a>
    </details>
  </div>
</header>




    <!-- Main content remains the same -->
<main id="main" class="pt-20">
<div class="container1">

<h1 class="water-heading">
  <i class="fas fa-tint water-icon"></i>
  Pakistan Crop Water Requirement Calculator
</h1>

    <div class="calculator">
        <div class="form-group">
            <label for="crop">Select Crop:</label>
            <select id="crop">
                <option value="">-- Select a Crop --</option>
                <option value="wheat">Wheat</option>
                <option value="rice">Rice</option>
                <option value="cotton">Cotton</option>
                <option value="sugarcane">Sugarcane</option>
                <option value="maize">Maize</option>
                <option value="vegetables">Vegetables</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="acres">Enter Acreage:</label>
            <input type="number" id="acres" min="0.1" step="0.1" value="1">
        </div>
        
        <div class="form-group">
            <label for="region">Select Region:</label>
            <select id="region">
                <option value="punjab">Punjab</option>
                <option value="sindh">Sindh</option>
                <option value="kpk">Khyber Pakhtunkhwa (KPK)</option>
                <option value="balochistan">Balochistan</option>
            </select>
        </div>

        <button class="water-button" onclick="calculateWater()">
            <i class="fas fa-tint icon"></i> 
             Calculate Water Requirements
        </button>
    </div>
    
    <div class="results" id="results" style="display: none;">

<h2 class="water-heading">
  <i class="fas fa-tint water-icon"></i>
  Pakistan Crop Water Requirement
</h2>

        <div id="cropInfo"></div>
        
        <div class="export-buttons">
            <button class="export-btn pdf-btn" onclick="exportToPDF()">
                <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M181.9 256.1c-5-16-4.9-46.9-2-46.9 8.4 0 7.6 36.9 2 46.9zm-1.7 47.2c-7.7 20.2-17.3 43.3-28.4 62.7 18.3-7 39-17.2 62.9-21.9-12.7-9.6-24.9-23.4-34.5-40.8zM86.1 428.1c0 .8 13.2-5.4 34.9-40.2-6.7 6.3-29.1 24.5-34.9 40.2zM248 160h136v328c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V24C0 10.7 10.7 0 24 0h200v136c0 13.3 10.7 24 24 24zm-8 171.8c-20-12.2-33.3-29-42.7-53.8 4.5-18.5 11.6-46.6 6.2-64.2-4.7-29.4-42.4-26.5-47.8-6.8-5 18.3-.4 44.1 8.1 77-11.5 27.6-28.7 64.6-40.8 85.8-.1 0-.1.1-.2.1-27.1 13.9-73.6 44.5-54.5 68 5.6 6.9 16 10 21.5 10 17.9 0 35.7-18 61.1-61.8 25.8-8.5 54.1-19.1 79-23.2 21.7 11.8 47.1 19.5 64 19.5 29.2 0 31.2-30 19.7-43.4-13.1-15.5-30.4-12.6-38.4-8.2zm146.4 92.5c-5.6-16.8-22.6-26-39.4-22.1-10.2 2.2-22.3 10.3-28.8 25-5.4 13.7-4.3 36 6.1 47.7 10.5 11.7 25.2 13.5 38.4 6.7 12.9-6.7 21.9-21.9 23.7-36.7 1.8-14.7-3.1-13.9-10-20.8z"/></svg>
                Export to PDF
            </button>
            <button class="export-btn excel-btn" onclick="exportToExcelWithCharts()">
                <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm60.1 106.5L224 336l60.1 93.5c5.1 8-.6 18.5-10.1 18.5h-34.9c-4.4 0-8.5-2.4-10.6-6.3C208.9 405.5 192 373 192 373c-6.4 14.8-10 20-36.6 68.8-2.1 3.9-6.1 6.3-10.5 6.3H110c-9.5 0-15.2-10.5-10.1-18.5l60.1-93.5-60.1-93.5c-5.2-8 .6-18.5 10.1-18.5h34.8c4.4 0 8.5 2.4 10.6 6.3 26.1 48.8 20 38.2 36.6 68.5 0 0 6.1-11.7 16.9-31.5 2.1-3.9 6.2-6.3 10.6-6.3H274c9.5-.1 15.2 10.4 10.1 18.4zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"/></svg>
                Export to Excel
            </button>
        </div>
        
        <div class="chart-container">
            <div class="chart-box">
                <canvas id="waterChart"></canvas>
            </div>
            <div class="chart-box">
                <canvas id="volumeChart"></canvas>
            </div>
        </div>
        
        <table id="waterTable">
            <thead>
                <tr>
                    <th>Month</th>
                    <th>Water Depth (Acre-Inches)</th>
                    <th>Water Volume (Liters)</th>
                    <th>Water Volume (Gallons)</th>
                </tr>
            </thead>
            <tbody id="tableBody"></tbody>
        </table>
        <div class="note">
            <p><strong>Note:</strong> 1 Acre-Inch = 27,154 gallons â‰ˆ 102,790 liters. Values are estimates.</p>
        </div>
    </div>
   </div>
</main>


  
   


       <!-- JavaScript for dropdown and mobile menu -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
    // Enhanced Dropdown Functionality
    const dropdownButton = document.getElementById('agriReqDropdown');
    const dropdownContent = document.querySelector('.dropdown1-content');
    const dropdownArrow = dropdownButton.querySelector('i');

    if (dropdownButton && dropdownContent && dropdownArrow) {
        dropdownButton.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            dropdownContent.classList.toggle('show');
            dropdownArrow.style.transform = dropdownContent.classList.contains('show') 
                ? 'rotate(180deg)' : 'rotate(0deg)';
        });
        
        document.addEventListener('click', function(e) {
            if (!dropdownButton.contains(e.target) && !dropdownContent.contains(e.target)) {
                dropdownContent.classList.remove('show');
                dropdownArrow.style.transform = 'rotate(0deg)';
            }
        });
    }

            // Mobile Menu
             const mobileMenuButton = document.getElementById('mobileMenuButton');
    const mobileMenu = document.getElementById('mobileMenu');
    const mobileMenuIcon = mobileMenuButton.querySelector('i');
    
    mobileMenuButton.addEventListener('click', function() {
        mobileMenu.classList.toggle('active');
        
        // Change hamburger to X icon
        if (mobileMenu.classList.contains('active')) {
            mobileMenuIcon.classList.remove('fa-bars');
            mobileMenuIcon.classList.add('fa-times');
        } else {
            mobileMenuIcon.classList.remove('fa-times');
            mobileMenuIcon.classList.add('fa-bars');
            // Close mobile dropdown when closing mobile menu
            const mobileAgriContent = document.getElementById('mobileAgriContent');
            const mobileChevron = document.querySelector('.mobile-chevron');
            if (mobileAgriContent && mobileChevron) {
                mobileAgriContent.classList.remove('show');
                mobileChevron.style.transform = 'rotate(0deg)';
            }
        }
    });

    // Mobile Dropdown (New Addition)
    const mobileAgriDropdown = document.getElementById('mobileAgriDropdown');
    const mobileAgriContent = document.getElementById('mobileAgriContent');
    const mobileChevron = document.querySelector('.mobile-chevron');
    
    if (mobileAgriDropdown && mobileAgriContent && mobileChevron) {
        mobileAgriDropdown.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            mobileAgriContent.classList.toggle('show');
            mobileChevron.style.transform = mobileAgriContent.classList.contains('show') 
                ? 'rotate(180deg)' : 'rotate(0deg)';
        });
    }
    
    // Close mobile menu when clicking on mobile menu links
    const mobileMenuLinks = document.querySelectorAll('.mobile-menu-item, .mobile-dropdown-item');
    mobileMenuLinks.forEach(link => {
        link.addEventListener('click', function() {
            mobileMenu.classList.remove('active');
            mobileMenuIcon.classList.remove('fa-times');
            mobileMenuIcon.classList.add('fa-bars');
            
            // Close mobile dropdown
            if (mobileAgriContent && mobileChevron) {
                mobileAgriContent.classList.remove('show');
                mobileChevron.style.transform = 'rotate(0deg)';
            }
        });
    });
    
    // Close mobile menu when clicking outside
    document.addEventListener('click', function(e) {
        if (mobileMenu && !mobileMenuButton.contains(e.target) && !mobileMenu.contains(e.target)) {
            mobileMenu.classList.remove('active');
            mobileMenuIcon.classList.remove('fa-times');
            mobileMenuIcon.classList.add('fa-bars');
            
            // Close mobile dropdown
            if (mobileAgriContent && mobileChevron) {
                mobileAgriContent.classList.remove('show');
                mobileChevron.style.transform = 'rotate(0deg)';
            }
        }
    });

    // Smooth scrolling for navigation links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
});
    </script>


    <script>
        // Crop data storage
        const cropData = {
            wheat: {
                name: "Wheat",
                season: "November - April",
                punjab: [4.5, 4.0, 3.5, 4.0, 5.0, 7.0],
                sindh: [4.8, 4.3, 3.8, 4.3, 5.3, 7.5],
                kpk: [4.0, 3.5, 3.0, 3.5, 4.5, 6.0],
                balochistan: [3.8, 3.3, 2.8, 3.3, 4.3, 5.8],
                months: ["Nov", "Dec", "Jan", "Feb", "Mar", "Apr"]
            },
            rice: {
                name: "Rice",
                season: "June - October",
                punjab: [12, 15, 15, 12, 8],
                sindh: [13, 16, 16, 13, 9],
                kpk: [11, 14, 14, 11, 7],
                balochistan: [10, 13, 13, 10, 6],
                months: ["Jun", "Jul", "Aug", "Sep", "Oct"]
            },
            cotton: {
                name: "Cotton",
                season: "May - November",
                punjab: [6, 8, 10, 10, 8, 6, 4],
                sindh: [6.5, 8.5, 10.5, 10.5, 8.5, 6.5, 4.5],
                kpk: [5.5, 7.5, 9.5, 9.5, 7.5, 5.5, 3.5],
                balochistan: [5, 7, 9, 9, 7, 5, 3],
                months: ["May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov"]
            },
            sugarcane: {
                name: "Sugarcane",
                season: "Year-round",
                punjab: [7, 7, 8, 8, 8, 7, 7, 7, 7, 7, 7, 7],
                sindh: [7.5, 7.5, 8.5, 8.5, 8.5, 7.5, 7.5, 7.5, 7.5, 7.5, 7.5, 7.5],
                kpk: [6.5, 6.5, 7.5, 7.5, 7.5, 6.5, 6.5, 6.5, 6.5, 6.5, 6.5, 6.5],
                balochistan: [6, 6, 7, 7, 7, 6, 6, 6, 6, 6, 6, 6],
                months: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", 
                         "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
            },
            maize: {
                name: "Maize",
                season: "April - September",
                punjab: [5, 6, 6, 5, 4, 4],
                sindh: [5.5, 6.5, 6.5, 5.5, 4.5, 4.5],
                kpk: [4.5, 5.5, 5.5, 4.5, 3.5, 3.5],
                balochistan: [4, 5, 5, 4, 3, 3],
                months: ["Apr", "May", "Jun", "Jul", "Aug", "Sep"]
            },
            vegetables: {
                name: "Vegetables",
                season: "Varies",
                punjab: [4, 4, 5, 5, 6, 6, 5, 5, 4, 4, 4, 4],
                sindh: [4.5, 4.5, 5.5, 5.5, 6.5, 6.5, 5.5, 5.5, 4.5, 4.5, 4.5, 4.5],
                kpk: [3.5, 3.5, 4.5, 4.5, 5.5, 5.5, 4.5, 4.5, 3.5, 3.5, 3.5, 3.5],
                balochistan: [3, 3, 4, 4, 5, 5, 4, 4, 3, 3, 3, 3],
                months: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", 
                         "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
            }
        };

        // Chart instances
        let waterChart = null;
        let volumeChart = null;

        function calculateWater() {
            const cropSelect = document.getElementById("crop");
            const acresInput = document.getElementById("acres");
            const regionSelect = document.getElementById("region");
            const resultsDiv = document.getElementById("results");
            const cropInfoDiv = document.getElementById("cropInfo");
            const tableBody = document.getElementById("tableBody");
            
            // Validate input
            if (cropSelect.value === "") {
                alert("Please select a crop");
                return;
            }
            
            const acres = parseFloat(acresInput.value);
            if (isNaN(acres) || acres <= 0) {
                alert("Please enter a valid acreage");
                return;
            }
            
            const crop = cropSelect.value;
            const region = regionSelect.value;
            
            // Get crop data
            const data = cropData[crop];
            const waterValues = data[region];
            const months = data.months;
            
            // Display crop info
            cropInfoDiv.innerHTML = `
                <p><strong>Crop:</strong> ${data.name}</p>
                <p><strong>Growing Season:</strong> ${data.season}</p>
                <p><strong>Region:</strong> ${region.charAt(0).toUpperCase() + region.slice(1)}</p>
                <p><strong>Acreage:</strong> ${acres} acre(s)</p>
            `;
            
            // Clear previous results
            tableBody.innerHTML = "";
            
            // Calculate data for charts and table
            let totalAcreInches = 0;
            const litersData = [];
            const gallonsData = [];
            
            for (let i = 0; i < months.length; i++) {
                const acreInches = waterValues[i];
                const liters = acreInches * 102790 * acres;
                const gallons = acreInches * 27154 * acres;
                
                totalAcreInches += acreInches;
                litersData.push(liters);
                gallonsData.push(gallons);
                
                // Add to table
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${months[i]}</td>
                    <td>${acreInches.toFixed(1)}</td>
                    <td>${liters.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}</td>
                    <td>${gallons.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}</td>
                `;
                tableBody.appendChild(row);
            }
            
            // Add total row
            const totalRow = document.createElement("tr");
            totalRow.className = "highlight";
            totalRow.innerHTML = `
                <td><strong>Total</strong></td>
                <td><strong>${totalAcreInches.toFixed(1)}</strong></td>
                <td><strong>${litersData.reduce((a,b) => a + b, 0).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}</strong></td>
                <td><strong>${gallonsData.reduce((a,b) => a + b, 0).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}</strong></td>
            `;
            tableBody.appendChild(totalRow);
            
            // Create or update charts
            createCharts(months, waterValues, litersData, gallonsData, data.name, region);
            
            // Show results
            resultsDiv.style.display = "block";
        }

        function createCharts(months, waterValues, litersData, gallonsData, cropName, region) {
            const ctx1 = document.getElementById('waterChart').getContext('2d');
            const ctx2 = document.getElementById('volumeChart').getContext('2d');
            
            // Destroy previous charts if they exist
            if (waterChart) waterChart.destroy();
            if (volumeChart) volumeChart.destroy();
            
            // Water Depth Chart (Acre-Inches)
            waterChart = new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: months,
                    datasets: [{
                        label: 'Water Depth (Acre-Inches)',
                        data: waterValues,
                        backgroundColor: 'rgba(54, 162, 235, 0.7)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: `Monthly Water Depth for ${cropName}`,
                            font: { size: 16 }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.parsed.y.toFixed(1)} acre-inches`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Acre-Inches'
                            }
                        }
                    }
                }
            });
            
            // Water Volume Chart (Gallons)
            volumeChart = new Chart(ctx2, {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [{
                        label: 'Water Volume (Gallons)',
                        data: gallonsData,
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 2,
                        tension: 0.1,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: `Monthly Water Volume for ${cropName} in ${region.charAt(0).toUpperCase() + region.slice(1)}`,
                            font: { size: 16 }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.parsed.y.toLocaleString()} gallons`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Gallons'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
        }

        function exportToPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Get crop info
            const cropInfo = document.getElementById('cropInfo').innerText;
            const lines = cropInfo.split('\n').filter(line => line.trim() !== '');
            
            // Add title and crop info
            doc.setFontSize(18);
            doc.text('Water Requirements Report', 105, 15, { align: 'center' });
            
            doc.setFontSize(12);
            let yPos = 30;
            lines.forEach(line => {
                doc.text(line, 14, yPos);
                yPos += 7;
            });
            
            yPos += 10;
            
            // Add charts as images
            const waterChartCanvas = document.getElementById('waterChart');
            const volumeChartCanvas = document.getElementById('volumeChart');
            
            const waterChartImg = waterChartCanvas.toDataURL('image/png');
            const volumeChartImg = volumeChartCanvas.toDataURL('image/png');
            
            doc.addImage(waterChartImg, 'PNG', 10, yPos, 90, 60);
            doc.addImage(volumeChartImg, 'PNG', 105, yPos, 90, 60);
            
            yPos += 70;
            
            // Add table
            doc.autoTable({
                startY: yPos,
                head: [['Month', 'Acre-Inches', 'Liters', 'Gallons']],
                body: Array.from(document.querySelectorAll('#tableBody tr')).map(tr => {
                    return Array.from(tr.querySelectorAll('td')).map(td => td.innerText);
                }),
                foot: [Array.from(document.querySelectorAll('.highlight td')).map(td => td.innerText)],
                styles: { fontSize: 8 },
                headStyles: { fillColor: [41, 128, 185] }
            });
            
            // Save the PDF
            const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
            doc.save(`Water_Requirements_${timestamp}.pdf`);
        }
        

async function exportToExcelWithCharts() {
    const workbook = new ExcelJS.Workbook();

    // 1. Sheet: Crop Info
    const cropInfoText = document.getElementById("cropInfo").innerText.split('\n');
    const infoSheet = workbook.addWorksheet('Crop Info');

    cropInfoText.forEach((line, index) => {
        infoSheet.addRow([line]);
    });

    // 2. Sheet: Water Table
    const tableSheet = workbook.addWorksheet('Water Data');
    const table = document.querySelectorAll('#waterTable thead tr th');
    const headers = Array.from(table).map(th => th.innerText);
    tableSheet.addRow(headers);

    const rows = document.querySelectorAll('#waterTable tbody tr');
    rows.forEach(row => {
        const cells = Array.from(row.querySelectorAll('td')).map(td => td.innerText.replace(/,/g, ''));
        tableSheet.addRow(cells);
    });

    // 3. Sheet: Charts (Images)
    const chartSheet = workbook.addWorksheet('Charts');

    const canvas1 = document.getElementById('waterChart');
    const canvas2 = document.getElementById('volumeChart');

    const img1 = canvas1.toDataURL('image/png');
    const img2 = canvas2.toDataURL('image/png');

    const imageId1 = workbook.addImage({
        base64: img1,
        extension: 'png',
    });

    const imageId2 = workbook.addImage({
        base64: img2,
        extension: 'png',
    });

    chartSheet.addImage(imageId1, {
        tl: { col: 0, row: 1 },
        ext: { width: 600, height: 300 }
    });

    chartSheet.addImage(imageId2, {
        tl: { col: 0, row: 20 },
        ext: { width: 600, height: 300 }
    });

    // 4. Download
    const buffer = await workbook.xlsx.writeBuffer();
    const blob = new Blob([buffer], { type: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" });
    const link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.download = `Water_Requirements_${new Date().toISOString().split('T')[0]}.xlsx`;
    link.click();
}

    </script>
 <script src="../auth.js"></script>
</body>
</html>
